<!DOCTYPE html5>
<html lang="en">
<head>
	<meta charset= "utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style/transactionView.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

	<div class="container">
    <a <a href="home.html">
		<img src="style/logo.png" class="logo">
		</a>
    <a href="index.html">
      <img src="style/logout.png" class="logout">
    </a>

    <p id="name" for="name"></p>
    <hr>

    <div id="info" class="box">
      <div class="block1">
        <h3 id="text1">Saving transactions</h3>
				<hr>
				<div Class="scrollTransaction">
					<div Class="transactions">
						<p id="transaction" for = "transaction"></p>
				</div>
				</div>
      </div>
    </div>

	<div class="vl"></div>
	<div id="accounts" class="box">

		<div class="block">
			<a href="transactionView.html">
			<h3 id="text1">Checking</h3>
			</a>
			<hr>
			<p id="nameChecking" for = "nameChecking"></p>
			<p id="IBANChecking" for = "IBANChecking"></p>
			<p id="money">€77,90</p>
		</div>

		<div id="transaction" class="block">
			<a href="savingView.html">
			<h3 id="text1">Saving</h3>
		</a>
			<hr>
			<p id="nameSaving" for = "nameSaving"></p>
			<p id="IBANSaving" for = "IBANSaving"></p>
			<p id="money">€230,55</p>

		</div>

	</div>
</div>

</body>
</html>

<script type="text/javascript">
var loggedInUser = JSON.parse(sessionStorage.getItem("loggedInUser"));
$('#name').text(loggedInUser.firstname + " " + loggedInUser.lastname);
$('#nameChecking').text(loggedInUser.firstname + " " + loggedInUser.lastname);
$('#nameSaving').text(loggedInUser.firstname + " " + loggedInUser.lastname);
$('#transaction').text(showSavings);

$(document).ready(function(){
								$.ajax({
										url:'http://localhost:8080/transaction/',
										type:'get',
										data:{userId:loggedInUser.id},
										contentType: "application/json",
										dataType:"json",
										success:function(response){
												$.each(response,function(index){
													showSavings(response[index]);
												});
										},
										error: function(error){
												alert("There was an error try again");
										}
								});
		});

		function showSavings(transaction)
		{
			var html = '<div class="block1">
									<h3>' + transaction.by + '</h3>
									<p>'+ transaction.amount + '</p>
									</div>'
			$("info").append(html);
		}
</script>
